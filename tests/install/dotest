#!/bin/bash

die() {
	echo "FAILED: $*"
	exit 1
}

cp ../../q .
./q -i || die "./q -i"

applets=$(./q -Ch | \
	sed -n '/^Currently defined applets:/,/^Options/p' | \
	grep ' : ' | \
	awk '{print $1}'
)

for app in ${applets} ; do
	[ ! -e $app ] && die "$app does not exist"
done
echo "PASSED"
exit 0
